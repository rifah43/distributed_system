{"ast":null,"code":"var _class;\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/forms\";\nexport class PostComponent {\n  onFileSelected(event) {\n    this.selectedFile = event.target.files[0];\n  }\n  constructor(http) {\n    this.http = http;\n    this.post = {\n      content: '',\n      image: ''\n    };\n    this.selectedFile = null;\n  }\n  submitPost() {\n    if (this.selectedFile) {\n      const formData = new FormData();\n      formData.append('content', this.post.content);\n      formData.append('image', this.selectedFile, this.selectedFile.name);\n      this.http.post('http://localhost:8080/posts', formData).subscribe(response => {\n        console.log(response);\n        this.post.content = '';\n        this.selectedFile = null;\n      }, error => {\n        console.error(error);\n      });\n    } else {\n      this.http.post('http://localhost:8080/posts', this.post).subscribe(response => {\n        console.log(response);\n        this.post.content = '';\n      });\n    }\n  }\n}\n_class = PostComponent;\n_class.ɵfac = function PostComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.HttpClient));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"app-post\"]],\n  decls: 9,\n  vars: 2,\n  consts: [[3, \"formGroup\", \"ngSubmit\"], [\"for\", \"content\"], [\"id\", \"content\", \"name\", \"content\", \"placeholder\", \"Write your post here...\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"file\", \"name\", \"image\", 1, \"a\", 3, \"change\"], [\"type\", \"submit\", \"value\", \"POST\"]],\n  template: function PostComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h2\");\n      i0.ɵɵtext(1, \"Create a Post\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"form\", 0);\n      i0.ɵɵlistener(\"ngSubmit\", function PostComponent_Template_form_ngSubmit_2_listener() {\n        return ctx.submit();\n      });\n      i0.ɵɵelementStart(3, \"div\")(4, \"label\", 1);\n      i0.ɵɵtext(5, \"Content:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"textarea\", 2);\n      i0.ɵɵlistener(\"ngModelChange\", function PostComponent_Template_textarea_ngModelChange_6_listener($event) {\n        return ctx.post.content = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"input\", 3);\n      i0.ɵɵlistener(\"change\", function PostComponent_Template_input_change_7_listener($event) {\n        return ctx.onFileSelected($event);\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(8, \"input\", 4);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"formGroup\", ctx.form);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.post.content);\n    }\n  },\n  dependencies: [i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.RequiredValidator, i2.NgModel, i2.FormGroupDirective],\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["PostComponent","onFileSelected","event","selectedFile","target","files","constructor","http","post","content","image","submitPost","formData","FormData","append","name","subscribe","response","console","log","error","i0","ɵɵdirectiveInject","i1","HttpClient","selectors","decls","vars","consts","template","PostComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","PostComponent_Template_form_ngSubmit_2_listener","submit","PostComponent_Template_textarea_ngModelChange_6_listener","$event","PostComponent_Template_input_change_7_listener","ɵɵelement","ɵɵadvance","ɵɵproperty","form"],"sources":["C:\\Users\\HP\\Desktop\\cpp\\new\\distributed_system\\front-end\\src\\app\\post\\post.component.ts","C:\\Users\\HP\\Desktop\\cpp\\new\\distributed_system\\front-end\\src\\app\\post\\post.component.html"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport swal from 'sweetalert2';\n\n@Component({\n  selector: 'app-post',\n  templateUrl: './post.component.html',\n  styleUrls: ['./post.component.css']\n})\nexport class PostComponent {\n  post = {\n    content: '',\n    image:''\n  };\nloggedInUser: any;\n\nselectedFile: File | null = null;\n  onFileSelected(event: any) {\n    this.selectedFile = event.target.files[0];\n  }\n\n  constructor(private http: HttpClient) { }\n\n  submitPost() {\n    if (this.selectedFile) {\n      const formData = new FormData();\n      formData.append('content', this.post.content);\n      formData.append('image', this.selectedFile, this.selectedFile.name);\n\n      this.http.post<any>('http://localhost:8080/posts', formData).subscribe(\n        (response) => {\n          console.log(response);\n          this.post.content = '';\n          this.selectedFile= null;\n        },\n        (error) => {\n          console.error(error);\n        }\n      );\n    } else {\n      this.http.post('http://localhost:8080/posts', this.post)\n        .subscribe((response: any) => {\n          console.log(response);\n          this.post.content = '';\n        });\n    }\n  }\n}\n\n","<h2>Create a Post</h2>\n\n<form [formGroup]=\"form\" (ngSubmit)=\"submit()\">\n  <div>\n    <label for=\"content\">Content:</label>\n    <textarea id=\"content\" [(ngModel)]=\"post.content\" name=\"content\" placeholder=\"Write your post here...\" required></textarea>\n    <input type=\"file\"  name=\"image\" class=\"a\" (change)=\"onFileSelected($event)\" />\n  </div>\n  <input type=\"submit\" value=\"POST\">\n</form>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}