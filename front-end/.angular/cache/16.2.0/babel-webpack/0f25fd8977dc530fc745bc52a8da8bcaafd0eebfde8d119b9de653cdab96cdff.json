{"ast":null,"code":"// ... (previous imports)\nexport class PostComponent {\n  // ... (previous code)\n  submit() {\n    if (!this.jwtToken) {\n      swal.fire('Error!', 'Please log in to create a post.', 'error');\n      return;\n    }\n    const content = this.form.get('content')?.value;\n    const image = this.selectedFile;\n    if (!content && !image) {\n      swal.fire('Error!', 'Please provide either post content or an image.', 'error');\n      return;\n    }\n    const formData = new FormData(); // Use FormData to handle file uploads\n    formData.append('content', content);\n    if (image) {\n      formData.append('image', image, image.name); // Append the image field properly\n    }\n\n    const headers = new HttpHeaders({\n      Authorization: `Bearer ${this.jwtToken}`\n    });\n    this.http.post('http://localhost:9200/user/post', formData, {\n      headers: headers\n    }).subscribe(response => {\n      this.form.reset();\n      swal.fire({\n        title: 'Success!',\n        text: response.message,\n        icon: 'success',\n        timer: 1500,\n        showConfirmButton: false\n      });\n      this.selectedFile = null;\n      this.router.navigate(['/']);\n    }, error => {\n      console.error(error);\n    });\n  }\n}","map":{"version":3,"names":["PostComponent","submit","jwtToken","swal","fire","content","form","get","value","image","selectedFile","formData","FormData","append","name","headers","HttpHeaders","Authorization","http","post","subscribe","response","reset","title","text","message","icon","timer","showConfirmButton","router","navigate","error","console"],"sources":["C:\\Users\\HP\\Desktop\\cpp\\new\\distributed_system\\front-end\\src\\app\\post\\post.component.ts"],"sourcesContent":["// ... (previous imports)\r\n\r\nexport class PostComponent implements OnInit {\r\n  // ... (previous code)\r\n\r\n  submit(): void {\r\n    if (!this.jwtToken) {\r\n      swal.fire('Error!', 'Please log in to create a post.', 'error');\r\n      return;\r\n    }\r\n\r\n    const content = this.form.get('content')?.value;\r\n    const image = this.selectedFile;\r\n\r\n    if (!content && !image) {\r\n      swal.fire('Error!', 'Please provide either post content or an image.', 'error');\r\n      return;\r\n    }\r\n\r\n    const formData = new FormData(); // Use FormData to handle file uploads\r\n    formData.append('content', content);\r\n    if (image) {\r\n      formData.append('image', image, image.name); // Append the image field properly\r\n    }\r\n\r\n    const headers = new HttpHeaders({\r\n      Authorization: `Bearer ${this.jwtToken}`\r\n    });\r\n\r\n    this.http.post<any>('http://localhost:9200/user/post', formData, {\r\n      headers: headers\r\n    }).subscribe(\r\n      (response) => {\r\n        this.form.reset();\r\n        swal.fire({\r\n          title: 'Success!',\r\n          text: response.message,\r\n          icon: 'success',\r\n          timer: 1500,\r\n          showConfirmButton: false\r\n        });\r\n        this.selectedFile = null;\r\n        this.router.navigate(['/']);\r\n      },\r\n      (error) => {\r\n        console.error(error);\r\n      }\r\n    );\r\n  }\r\n}\r\n"],"mappings":"AAAA;AAEA,OAAM,MAAOA,aAAa;EACxB;EAEAC,MAAMA,CAAA;IACJ,IAAI,CAAC,IAAI,CAACC,QAAQ,EAAE;MAClBC,IAAI,CAACC,IAAI,CAAC,QAAQ,EAAE,iCAAiC,EAAE,OAAO,CAAC;MAC/D;;IAGF,MAAMC,OAAO,GAAG,IAAI,CAACC,IAAI,CAACC,GAAG,CAAC,SAAS,CAAC,EAAEC,KAAK;IAC/C,MAAMC,KAAK,GAAG,IAAI,CAACC,YAAY;IAE/B,IAAI,CAACL,OAAO,IAAI,CAACI,KAAK,EAAE;MACtBN,IAAI,CAACC,IAAI,CAAC,QAAQ,EAAE,iDAAiD,EAAE,OAAO,CAAC;MAC/E;;IAGF,MAAMO,QAAQ,GAAG,IAAIC,QAAQ,EAAE,CAAC,CAAC;IACjCD,QAAQ,CAACE,MAAM,CAAC,SAAS,EAAER,OAAO,CAAC;IACnC,IAAII,KAAK,EAAE;MACTE,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEJ,KAAK,EAAEA,KAAK,CAACK,IAAI,CAAC,CAAC,CAAC;;;IAG/C,MAAMC,OAAO,GAAG,IAAIC,WAAW,CAAC;MAC9BC,aAAa,EAAE,UAAU,IAAI,CAACf,QAAQ;KACvC,CAAC;IAEF,IAAI,CAACgB,IAAI,CAACC,IAAI,CAAM,iCAAiC,EAAER,QAAQ,EAAE;MAC/DI,OAAO,EAAEA;KACV,CAAC,CAACK,SAAS,CACTC,QAAQ,IAAI;MACX,IAAI,CAACf,IAAI,CAACgB,KAAK,EAAE;MACjBnB,IAAI,CAACC,IAAI,CAAC;QACRmB,KAAK,EAAE,UAAU;QACjBC,IAAI,EAAEH,QAAQ,CAACI,OAAO;QACtBC,IAAI,EAAE,SAAS;QACfC,KAAK,EAAE,IAAI;QACXC,iBAAiB,EAAE;OACpB,CAAC;MACF,IAAI,CAAClB,YAAY,GAAG,IAAI;MACxB,IAAI,CAACmB,MAAM,CAACC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;IAC7B,CAAC,EACAC,KAAK,IAAI;MACRC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;IACtB,CAAC,CACF;EACH"},"metadata":{},"sourceType":"module","externalDependencies":[]}